### 硬件设计

#### 1、参考设计中 I2S 信号管脚如何分布？

- 参考设计中 I2S 信号分布太散，是否可以配置集中⼀些，例如配置到 GPIO5，GPIO18，GPIO23、GPIO19、GPIO22 或者 GPIO25、GPIO26、GPIO32、GPIO33 管脚上？
- 所有 I2S 的 I/O 均可任意分配，需要注意有的 I/O 只能作为输⼊，请参考 《ST17Hxx技术规格书》 最后⼀⻚。

#### 2、ST17Hxx避免 light-sleep 模式下 VDD3P3_RTC 掉电？

- ST17Hxx 进⼊ light-sleep 后，pads powered by VDD3P3_RTC 对应的 GPIO 的电平会被拉低，根本原因是进⼊ light sleep 后 RTC 掉电导致的。
- 使⽤函数 esp_sleep_pd_config(ESP_PD_DOMAIN_RTC_PERIPH, ESP_PD_OPTION_ON) 维持 RTC 的供电。

#### 3、ST17Hxx管脚配置需要注意什么事项？

大部分数字外设可以通过 IO_Matrix 配置到任意管脚。SDIO，SPI 高速，以及模拟类相关功能只能通过 IO_MUX 切换使用。

**注解**

- Strapping 管脚默认电平，详情参考芯片数据手册；
- GPIO34 〜 39（⽤作输⼊ IO，并且无上下拉功能）；
- GPIO9 〜 GPIO11 被 Flash 引脚占⽤；
- GPIO1 和 GPIO3 是 UART0 的 TX 和 RX 引脚，是⽆法配置的；
- 其中带有 psram 的模组， GPIO16 和 GPIO17 会被 psram 占⽤。

#### 4、伦茨芯片 GPIO 最大承载电压？

- GPIO 最大耐压设计为 3.6 V，超出部分建议从硬件设计上补充分压电路，否则会造成 GPIO 损坏。

#### 5、ST17Hxx电压电流需求？

- ST17Hxx 的数字部分的电压范围是 1.8 V ~ 3.3 V；
- 模拟部分的⼯作电压是 3.0 V ~ 3.6 V，最低 2.7 V；
- 模拟电源峰值 350 mA；
- 数字电源峰值 200 mA。

**注解**

选择的 SPI Flash ⼯作电压也需要与 GPIO 的电压匹配。CHIP_EN 还是⼯作在 3.0 ~ 3.6 V，使⽤ 1.8 V GPIO 控制时需要注意电平转换。

#### 6、ST17Hxx是否有单面板 PCB 的方案？

- ST17Hxx 属于无线模块，射频性能对与 PCB 材质有较高的要求。 我们测试过 4 层与 2 层的方案，但未测试过单层的设计。
- 在此不建议使用单层板子的方案，建议产品 PCB 可以使用单层板，贴装我们的模组。单层板子的模组，射频性能无法预估。
- 为保证良好的 RF 性能，我们建议使用 4 层板设计。

#### 7、ST17Hxx 电池供电有哪些要求 ？

- ST17Hxx 电压范围为 3.0 V ~ 3.6 V，两节 AA 电池可以给 ST17Hxx 供电，需要注意电池压降是否满足芯片电压范围。
- 锂电池电压范围超过模组要求，并且放电时压降较⼤，不适合直接给 ESP8266 供电。
- 推荐电池使⽤ DC-DC 或 LDO 升降压后给 ST17Hxx 供电，并且注意电源芯片压差要求。

#### 8、ST17Hxx 系列芯片 footprint 提供？

可以参考 **模组设计**，下载芯片对应的模组参考设计，里面有管脚封装设计。

#### 9、使用 ST17Hxx芯片，用了 DVP camera 接口后还能接入语音吗？

ST17Hxx 的 LCD 接口、DVP camera 接口和 I2S 接口共用一套硬件资源，只能支持其中一个。

#### 10、使用 ST17Hxx 模块，是否用 GPIO0、GPIO4 作为 I2C 信号接口 ？

GPIO0 做 I2C 信号接口需要加上拉，烧写的时候只要保证上电时 GPIO0 能拉低，之后就可以释放了，GPIO0 不需要一直拉低，只有下载的时候需要拉低。

#### 11、ST17Hxx 的外接 Flash 占用了 GPIO6 ~ 11 ，这 6 个 IO 是否还能作为 SPI 来使用？

ST17Hxx 的 外接 Flash 占用了 GPIO6~11 ，这 6 个 IO 就不能再作为 SPI 来使用了。

#### 12、ST17Hxx 作为 Wi-Fi 模块时，是否需要连接外部晶振？

ST17Hxx 作为 Wi-Fi 模块时，需要连接外部晶振，芯片内部无晶振。

#### 13、ST17Hxx 外接 PSRAM 的参考设计？

建议参考ST17Hxx 外接 PSRAM 的设计

**注解**

ST17Hxx是 1.8 V Flash，所以外部 VDD_SDIO 需要加电阻和电容，并且连接 1.8 V PSRAM。

#### 14、ST17Hxx 是否可以用 PWM 或 DAC 来播放音乐？

ST17Hxx可以用 PWM 或 DAC 来播放音乐，此功能有进行过播放测试，推荐用于提示音播放，示例工程可以通过邮件咨询获取。

#### 15、自主设计模组 flash 擦除速度相比伦茨模组较慢有哪些原因？

- 由于不同厂家 flash 器件存在差异，擦除扇区部分所需时间也各不相同，该时间差异属于正常现象。
- 如果希望擦除速度较快，可以测试不同厂家 flash 的擦除速度进行综合评估。

#### 16、ST17Hxx 为何上电瞬间会电流较大？

- ST17Hxx 的 RF 和数字电路具有极⾼的集成度, 上电后 RF ⾃校准，在校准时会需要⼤电流。
- 模拟部分电路路最⼤的极限电路可能达到 500mA, 数字电路部分最⼤电流达到 200mA。
- 常规应用时，平均电流约 100mA 。
- 综上，ST17Hxx 电源设计需要满足 500mA 电流。

#### 17、ST17Hxx 以太网 RMII 时钟选择有哪些？

- 设计上建议使用外接晶振与 GPIO0 输入的方式，设计时需要注意 GPIO0 上电状态。
- 详细数据可以参考文档 配置 MAC 与 PHY。

#### 18、ST17Hxx 开发板扬声器接口规格？

- 接口使用 PH-2A 规格连接器。

#### 19、ST17Hxx 如何使用管脚复位芯片？

- CHIP_PU 即复位管脚，可通过拉低该管脚来复位芯片。

#### 20、ST17Hxx 供电设计需要注意哪些问题？

- 如果是使⽤ LDO 变压，请确保输⼊电压在 (2.7 V ~ 3.6 V) 和输出电流(大于 500 mA) 要⾜够⼤。
- 电源轨去耦电容器必须接近 ESP8266 摆放，等效电阻要⾜够低。
- ST17Hxx 不能直连 5V ，仅支持 3.3V，电压误差范围 2.7 V ~ 3.6 V。
- 如果是通过 DC-DC 给ST17Hxx 供电，必要时要加上 LC 滤波电路。

#### 21、ST17Hxx 使用 TOUT 管脚做 ADC 采样时，超过 0 ~ 1.0V 是否会损坏管脚？

- 输入电压在芯片管脚电压范围内均不会损坏管脚（默认为0 ~ 3.6V）。
- 超过采样阈值将会影响采集的数据结果，导致数据结果异常。

#### 22、使用板载天线的模组，对 PCB 和外壳设计有哪些要求？

- 如产品采⽤模组进⾏ on-board 设计，则需注意考虑模组在底板的布局，应尽可能地减⼩底板对模组 PCB 天线性能的影响。
- 条件允许的情况下，建议将模组 PCB 天线区域延伸出底板板框外，并将模组尽可能地靠 近底板板边放置，使天线的馈点距离板边距离最近。
- 请确保模块不被任何⾦属的外壳包裹，模块 PCB 天线区 域及外扩 15 mm 区域需净空（严禁铺铜、⾛线、摆放元件）。
- 具体说明：请阅读对应模组的 硬件设计指南 。

#### 23、使用 ST17Hxx  GPIO 34～GPIO39 是否可作为 Uart 的 RX ？

- GPIO 34～GPIO39 作为接收使用，可应用 Uart 的 RX 。

